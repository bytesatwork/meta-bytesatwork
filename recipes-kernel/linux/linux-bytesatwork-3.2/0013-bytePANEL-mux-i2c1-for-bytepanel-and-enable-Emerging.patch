From 8970194b34cbe83b667f7f0340b6733164758eda Mon Sep 17 00:00:00 2001
From: Markus Kappeler <markus.kappeler@bytesatwork.ch>
Date: Tue, 1 Oct 2013 14:40:31 +0200
Subject: [PATCH] bytePANEL: mux i2c1 for bytepanel and enable Emerging
 Cap.-Touch

---
 arch/arm/mach-omap2/board-am335x-bytepanel.c |   17 ++++++++++-------
 1 file changed, 10 insertions(+), 7 deletions(-)

diff --git a/arch/arm/mach-omap2/board-am335x-bytepanel.c b/arch/arm/mach-omap2/board-am335x-bytepanel.c
index 3820f03..05e1284 100644
--- a/arch/arm/mach-omap2/board-am335x-bytepanel.c
+++ b/arch/arm/mach-omap2/board-am335x-bytepanel.c
@@ -1,5 +1,5 @@
 /*
- * Code for AM335X EVM.
+ * Code for AM335X bytePANEL
  *
  * Copyright (C) 2011 Texas Instruments, Inc. - http://www.ti.com/
  *
@@ -596,11 +596,11 @@ static struct pinmux_config rmii1_pin_mux[] = {
 	{NULL, 0},
 };
 
-static struct pinmux_config i2c1_pin_mux[] = { /*XXX*/
-	{"spi0_d1.i2c1_sda",    OMAP_MUX_MODE2 | AM33XX_SLEWCTRL_SLOW |
-					AM33XX_PULL_ENBL | AM33XX_INPUT_EN},
-	{"spi0_cs0.i2c1_scl",   OMAP_MUX_MODE2 | AM33XX_SLEWCTRL_SLOW |
-					AM33XX_PULL_ENBL | AM33XX_INPUT_EN},
+static struct pinmux_config i2c1_pin_mux[] = {
+       {"uart0_ctsn.i2c1_sda",    OMAP_MUX_MODE3 | AM33XX_SLEWCTRL_SLOW |
+                                       AM33XX_PULL_UP | AM33XX_INPUT_EN},
+       {"uart0_rtsn.i2c1_scl",   OMAP_MUX_MODE3 | AM33XX_SLEWCTRL_SLOW |
+                                       AM33XX_PULL_UP | AM33XX_INPUT_EN},
 	{NULL, 0},
 };
 
@@ -2673,9 +2673,12 @@ static struct omap_musb_board_data musb_board_data = {
 
 static void __init am335x_evm_i2c_init(void)
 {
-	setup_pin_mux(i2c1_pin_mux);
 	omap_register_i2c_bus(1, 100, am335x_i2c0_boardinfo,
 				ARRAY_SIZE(am335x_i2c0_boardinfo));
+	setup_pin_mux(i2c1_pin_mux);
+        omap_register_i2c_bus(2, 100, am335x_i2c1_boardinfo,
+                        ARRAY_SIZE(am335x_i2c1_boardinfo));
+
 }
 
 void __iomem *am33xx_emif_base;
-- 
1.7.10.4

