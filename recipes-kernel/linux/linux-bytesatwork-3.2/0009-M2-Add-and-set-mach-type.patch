From f4f5884304ba598ccbd72ded63835db60e817826 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Oliver=20St=C3=A4bler?= <oliver.staebler@bytesatwork.ch>
Date: Wed, 4 Sep 2013 16:26:11 +0200
Subject: [PATCH] M2: Add and set mach-type

---
 arch/arm/mach-omap2/board-am335x-bytepanel.c |   13 +------------
 arch/arm/tools/mach-types                    |    1 +
 2 files changed, 2 insertions(+), 12 deletions(-)

diff --git a/arch/arm/mach-omap2/board-am335x-bytepanel.c b/arch/arm/mach-omap2/board-am335x-bytepanel.c
index a7d52b5..97c56d0 100644
--- a/arch/arm/mach-omap2/board-am335x-bytepanel.c
+++ b/arch/arm/mach-omap2/board-am335x-bytepanel.c
@@ -1512,8 +1512,7 @@ static void __init am335x_evm_map_io(void)
 	omapam33xx_map_common_io();
 }
 
-MACHINE_START(AM335XEVM, "am335xevm")
-	/* Maintainer: Texas Instruments */
+MACHINE_START(BATWM, "am335x-m2")
 	.atag_offset	= 0x100,
 	.map_io		= am335x_evm_map_io,
 	.init_early	= am33xx_init_early,
@@ -1522,13 +1521,3 @@ MACHINE_START(AM335XEVM, "am335xevm")
 	.timer		= &omap3_am33xx_timer,
 	.init_machine	= am335x_evm_init,
 MACHINE_END
-
-MACHINE_START(AM335XIAEVM, "am335xiaevm")
-	/* Maintainer: Texas Instruments */
-	.atag_offset	= 0x100,
-	.map_io		= am335x_evm_map_io,
-	.init_irq	= ti81xx_init_irq,
-	.init_early	= am33xx_init_early,
-	.timer		= &omap3_am33xx_timer,
-	.init_machine	= am335x_evm_init,
-MACHINE_END
diff --git a/arch/arm/tools/mach-types b/arch/arm/tools/mach-types
index 217ea76..84c6de7 100644
--- a/arch/arm/tools/mach-types
+++ b/arch/arm/tools/mach-types
@@ -1125,6 +1125,7 @@ ubisys_p9d_evp		MACH_UBISYS_P9D_EVP	UBISYS_P9D_EVP		3493
 atdgp318		MACH_ATDGP318		ATDGP318		3494
 m28evk			MACH_M28EVK		M28EVK			3613
 smdk4212		MACH_SMDK4212		SMDK4212		3638
+batwm			MACH_BATWM		BATWM			3701
 smdk4412		MACH_SMDK4412		SMDK4412		3765
 am335xevm		MACH_AM335XEVM		AM335XEVM		3589
 am335xiaevm		MACH_AM335XIAEVM	AM335XIAEVM		3684
-- 
1.7.10.4

