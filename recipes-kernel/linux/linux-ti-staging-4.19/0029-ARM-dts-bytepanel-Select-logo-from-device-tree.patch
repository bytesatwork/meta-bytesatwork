From 88b171500a3473a56c9ba5d359262ca06f884480 Mon Sep 17 00:00:00 2001
From: Daniel Ammann <daniel.ammann@bytesatwork.ch>
Date: Tue, 7 Aug 2018 12:06:21 +0200
Subject: [PATCH] ARM: dts: bytepanel: Select logo from device tree

---
 arch/arm/boot/dts/bytepanel-et070080dh6.dts | 4 ++++
 arch/arm/boot/dts/bytepanel-et10.dts        | 4 ++++
 arch/arm/configs/bytepanel_defconfig        | 1 +
 3 files changed, 9 insertions(+)

diff --git a/arch/arm/boot/dts/bytepanel-et070080dh6.dts b/arch/arm/boot/dts/bytepanel-et070080dh6.dts
index 55333c7c9ddb..6110cfb827b5 100644
--- a/arch/arm/boot/dts/bytepanel-et070080dh6.dts
+++ b/arch/arm/boot/dts/bytepanel-et070080dh6.dts
@@ -13,6 +13,10 @@
 	model = "bytePanel ET070080DH6";
 	compatible = "batw,bytepanel-et070080dh6", "batw,bytepanel", "batw,m2", "ti,am33xx";
 
+	chosen {
+		logo = "logo_baw_800x480_clut224";
+	};
+
 	et070080dh6 {
 		compatible = "ti,tilcdc,panel";
 		status = "okay";
diff --git a/arch/arm/boot/dts/bytepanel-et10.dts b/arch/arm/boot/dts/bytepanel-et10.dts
index cae6568a3a4a..2752f48e6717 100644
--- a/arch/arm/boot/dts/bytepanel-et10.dts
+++ b/arch/arm/boot/dts/bytepanel-et10.dts
@@ -13,6 +13,10 @@
 	model = "bytePanel ETML101000DH";
 	compatible = "batw,bytepanel-etml101000dh", "batw,bytepanel", "batw,m2", "ti,am33xx";
 
+	chosen {
+		logo = "logo_baw_1024x600_clut224";
+	};
+
 	panel {
 		compatible = "ti,tilcdc,panel";
 		pinctrl-names = "default";
diff --git a/arch/arm/configs/bytepanel_defconfig b/arch/arm/configs/bytepanel_defconfig
index 8aa3902201db..285fcfe8b53e 100644
--- a/arch/arm/configs/bytepanel_defconfig
+++ b/arch/arm/configs/bytepanel_defconfig
@@ -2489,6 +2489,7 @@ CONFIG_FRAMEBUFFER_CONSOLE_DETECT_PRIMARY=y
 # CONFIG_FRAMEBUFFER_CONSOLE_ROTATION is not set
 # CONFIG_FRAMEBUFFER_CONSOLE_DEFERRED_TAKEOVER is not set
 CONFIG_LOGO=y
+CONFIG_LOGO_OF_SELECT=y
 # CONFIG_LOGO_LINUX_MONO is not set
 # CONFIG_LOGO_LINUX_VGA16 is not set
 CONFIG_LOGO_LINUX_CLUT224=y
-- 
2.11.0

