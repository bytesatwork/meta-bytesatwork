From 44d0100ff37a001c7377be6c8891d3714b3ed6fc Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Stephan=20D=C3=BCnner?= <stephan.duenner@bytesatwork.ch>
Date: Thu, 3 Nov 2016 10:24:22 +0100
Subject: [PATCH 14/15] m2config: add DDR3 512MB ram, new PCB Rev and Nand

---
 board/bytesatwork/am335x/m2config/m2config.c | 16 +++++++++++++---
 board/bytesatwork/am335x/m2config/m2config.h | 14 ++++++++++++--
 include/configs/am335x_m2.h                  |  6 ++----
 3 files changed, 27 insertions(+), 9 deletions(-)

diff --git a/board/bytesatwork/am335x/m2config/m2config.c b/board/bytesatwork/am335x/m2config/m2config.c
index f89721c..5d462c8 100644
--- a/board/bytesatwork/am335x/m2config/m2config.c
+++ b/board/bytesatwork/am335x/m2config/m2config.c
@@ -9,17 +9,27 @@
 
 const struct m2config_name_pair m2config_pcb_name[] = {
 	{ M2_PCB_REV_00, "Rev.00" },
+	{ M2_PCB_REV_01, "Rev.01" },
+	{ M2_PCB_REV_02, "Rev.02" },
+	{ M2_PCB_REV_03, "Rev.03" },
 	{ -1, NULL },
 };
 
 const struct m2config_name_pair m2config_ram_name[] = {
-	{ M2_RAM_MT47H128M16RT25E, "MT47H128M16RT25E" },
-	{ M2_RAM_K4B2G1646EBIH9,   "K4B2G1646EBIH9" },
+	{ M2_RAM_MT47H128M16RT25E, "MT47H128M16RT25E 256 MB DDR2 @ 266MHz" },
+	{ M2_RAM_K4B2G1646EBIH9,   "K4B2G1646EBIH9 legacy DDR3 @ 303MHz" },
+	{ M2_RAM_K4B2G1646QBCK0,   "K4B2G1646QBCK0 256 MB DDR3 @ 400Mhz" },
+	{ M2_RAM_K4B4G1646DBIK0,   "K4B4G1646DBIK0 512 MB DDR3 @ 400MHz" },
 	{ -1, NULL },
 };
 
 const struct m2config_name_pair m2config_flash_name[] = {
-	{ M2_FLASH_2GBIT, "2 GBit" },
+	{ M2_NAND_2GBIT, "Nand 2 GBit" },
+	{ M2_NAND_4GBIT, "Nand 4 GBit" },
+	{ M2_EMMC_4GBIT, "EMMC 4 GBit" },
+	{ M2_EMMC_8GBIT, "EMMC 8 GBit" },
+	{ M2_EMMC_16GBIT, "EMMC 16 GBit" },
+	{ M2_EMMC_32GBIT, "EMMC 32 GBit" },
 	{ -1, NULL },
 };
 
diff --git a/board/bytesatwork/am335x/m2config/m2config.h b/board/bytesatwork/am335x/m2config/m2config.h
index e7a4545..0570d7e 100644
--- a/board/bytesatwork/am335x/m2config/m2config.h
+++ b/board/bytesatwork/am335x/m2config/m2config.h
@@ -19,17 +19,27 @@
 typedef enum
 {
 	M2_PCB_REV_00 = 0,
+	M2_PCB_REV_01 = 1,
+	M2_PCB_REV_02 = 2,
+	M2_PCB_REV_03 = 3,
 } m2config_pcb_t;
 
 typedef enum
 {
 	M2_RAM_MT47H128M16RT25E = 1,
-	M2_RAM_K4B2G1646EBIH9 = 2,
+	M2_RAM_K4B2G1646EBIH9   = 2,
+	M2_RAM_K4B2G1646QBCK0   = 3,
+	M2_RAM_K4B4G1646DBIK0   = 4,
 } m2config_ram_t;
 
 typedef enum
 {
-	M2_FLASH_2GBIT = 0,
+	M2_NAND_2GBIT  = 0,
+	M2_NAND_4GBIT  = 1,
+	M2_EMMC_4GBIT  = 2,
+	M2_EMMC_8GBIT  = 3,
+	M2_EMMC_16GBIT = 4,
+	M2_EMMC_32GBIT = 5,
 } m2config_flash_t;
 
 struct m2config {
diff --git a/include/configs/am335x_m2.h b/include/configs/am335x_m2.h
index 13c968c..ddd6dad 100644
--- a/include/configs/am335x_m2.h
+++ b/include/configs/am335x_m2.h
@@ -163,12 +163,10 @@
 
 #define CONFIG_CMD_M2CONFIG
 #define CONFIG_M2CONFIG_EEPROM
-#ifndef CONFIG_SPL_BUILD
 #define CONFIG_M2CONFIG_BUILTIN
 #define CONFIG_M2CONFIG_BUILTIN_PCB	M2_PCB_REV_00
-#define CONFIG_M2CONFIG_BUILTIN_RAM	M2_RAM_MT47H128M16RT25E
-#define CONFIG_M2CONFIG_BUILTIN_FLASH	M2_FLASH_2GBIT
-#endif
+#define CONFIG_M2CONFIG_BUILTIN_RAM	M2_RAM_K4B2G1646EBIH9
+#define CONFIG_M2CONFIG_BUILTIN_FLASH	M2_NAND_2GBIT
 
 /* NS16550 Configuration */
 #define CONFIG_SYS_NS16550_COM1		0x44e09000
-- 
2.1.4

